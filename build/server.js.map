{"version":3,"sources":["webpack:///webpack/bootstrap 5e9fbe1b2aed8d77534c","webpack:///external \"moduler\"","webpack:///./~/mithril/test-utils/callAsync.js","webpack:///./~/mithril/test-utils/parseURL.js","webpack:///./src/modules/index.js","webpack:///./src/templates/module.js","webpack:///./~/mithril/test-utils/browserMock.js","webpack:///external \"diet\"","webpack:///external \"diet-cross-origin\"","webpack:///external \"diet-static\"","webpack:///external \"fs\"","webpack:///external \"mithril\"","webpack:///external \"mithril-node-render\"","webpack:///external \"ramda\"","webpack:///external \"sequelize\"","webpack:///./src/modules/courses/course.controller.js","webpack:///./src/modules/courses/course.model.js","webpack:///./src/modules/courses/course.relations.js","webpack:///./src/modules/courses/module.js","webpack:///./src/modules/lessions/lession.controller.js","webpack:///./src/modules/lessions/lession.model.js","webpack:///./src/modules/lessions/lession.relations.js","webpack:///./src/modules/lessions/module.js","webpack:///./src/modules/roles-permissions/module.js","webpack:///./src/modules/roles-permissions/permission.controller.js","webpack:///./src/modules/roles-permissions/permission.model.js","webpack:///./src/modules/roles-permissions/permission.relations.js","webpack:///./src/modules/roles-permissions/permission.seed.js","webpack:///./src/modules/roles-permissions/role.controller.js","webpack:///./src/modules/roles-permissions/role.model.js","webpack:///./src/modules/roles-permissions/role.relations.js","webpack:///./src/modules/roles-permissions/role.seed.js","webpack:///./src/modules/roles-permissions/roles-permissions.model.js","webpack:///./src/modules/users/module.js","webpack:///./src/modules/users/user.controller.js","webpack:///./src/modules/users/user.model.js","webpack:///./src/modules/users/user.relations.js","webpack:///./src/modules/users/user.seed.js","webpack:///./src/server.js","webpack:///./src/templates/content.component.js","webpack:///./src/templates/course-edit.template.js","webpack:///./src/templates/course-item.component.js","webpack:///./src/templates/courses.template.js","webpack:///./src/templates/topbar.component.js","webpack:///./~/mithril/querystring/parse.js","webpack:///./~/mithril/test-utils/domMock.js","webpack:///./~/mithril/test-utils/pushStateMock.js","webpack:///./~/mithril/test-utils/xhrMock.js"],"names":["$","module","component","route","CourseCtrl","models","Course","relations","index","findAll","include","Author","edit","findOne","where","slug","params","new","Promise","resolve","reject","create","course","build","query","save","install","sync","force","data","msg","installed","json","Q","db","define","id","type","UUID","primaryKey","defaultValue","UUIDV1","title","STRING","description","TEXT","video","image","color","ENUM","values","level","active","BOOLEAN","User","Lession","belongsTo","as","hasMany","model","relation","controller","resolver","api","attach","server","controllers","get","LessionCtrl","then","lession","message","body","grade","INTEGER","complete","LessionUser","lessions","require","PermissionCtrl","RoleCtrl","Permission","permissions","permission","seed","name","unique","Role","RolePermission","belongsToMany","through","RoleRel","roles","role","UserCtrl","$$","users","user","username","email","password","BINARY","firstName","lastName","state","defaultScope","attributes","exclude","Courses","chain","administrator","admin","setRole","student","pepe","lecturer","dane","alex","laravel","setAuthor","lara401","kirby","sass","zurb","larry","ng","jack","ng2","temps","app","SQL","diet","global","m","render","crossOrigin","dietStatic","r","fs","baseTemplate","readFileSync","header","defaults","origin","credentials","staticFiles","path","listen","footer","host","dialect","pool","max","min","idle","authenticate","config","st","toLowerCase","replace","trim","components","store","getOrSet","getAll","fn","instance","newInstance","Object","defineProperty","call","serializer","options","with","reduce","obj","prop","without","forEach","publicUser","dataHandler","bind","method","post","put","delete","patch","routes","t","send","end","routeName","view","init","Array","prototype","arguments","acc","x","modules","run","target","descriptor","console","log","decorator","length","hasOwnProperty","Number","initializer","dataType","property","o","dataDecorator","Enum","Uuid","Str","Text","Bool","Int","bigInt","Float","Real","Dbl","Dec","i","option","alias","useModel","Model","gay","context","constructor","getOwnPropertyNames","template","class","vnode","attrs","children","_","slugify","Topbar","Content","CourseItem","xetter","xettings","value","once","num","stateModel","colors","levels","v","customSlug","item2","item","oninput","withAttr","onchange","map","items","oncreate","link","bg","href","style","backgroundImage","author"],"mappings":"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qBD;AAvBI,GAAP;AAyBD,C;;;;;;;;;;;;;;;;;;;AC3BD;;AAEA;AACA;AACA;;AAEA,2CAA2C;AAC3C,gBAAgB,oBAAoB;AACpC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClCA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,IAAI;AACJ,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,eAAe;AACrC;AACA;AACA;AACA;AACA;AACA,sBAAsB,kBAAkB;AACxC;AACA;AACA;AACA;AACA,2DAA2D,8BAA8B;AACzF;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,2BAA2B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA,uBAAuB,wEAAwE;AAC/F,4BAA4B,iCAAiC;AAC7D;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA,uBAAuB,kFAAkF;AACzG,4BAA4B,yBAAyB;AACrD;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;;AAEA;;AAEA;AACA;AACA,uBAAuB,kGAAkG;AACzH,4BAA4B,sEAAsE;AAClG,MAAM;AACN;AACA,uBAAuB,oGAAoG;AAC3H,4BAA4B,uEAAuE;AACnG,MAAM;AACN;;AAEA;;AAEA;AACA;AACA,oBAAoB,+BAA+B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wDAAwD;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,sBAAsB,oBAAoB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,uBAAuB,4BAA4B;AACnD;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,iBAAiB;AACvC;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,IAAI;AACJ;AACA;AACA,gCAAgC,iBAAiB;AACjD;AACA,IAAI;AACJ,wBAAwB,qBAAqB;AAC7C,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;;;;;AClhBA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc,qDAAqD;;AAEnE;AACA;AACA;AACA;AACA;AACA,8BAA8B,uEAAuE;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wEAAwE,mBAAmB;AAC3F;AACA;AACA;AACA,oEAAoE,+CAA+C;AACnH;AACA;AACA,gEAAgE,eAAe;AAC/E;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA;AACA,cAAc,2BAA2B;AACzC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,cAAc,2BAA2B;AACzC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,cAAc,2BAA2B;AACzC;AACA;AACA,GAAG;AACH;AACA;AACA,cAAc,2BAA2B;AACzC;AACA;AACA,GAAG;AACH;AACA;AACA,cAAc,4BAA4B;AAC1C;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,uBAAuB;AACrC;AACA,GAAG;AACH;AACA;AACA;AACA,cAAc,wDAAwD;AACtE;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,iBAAiB,oEAAoE;AACrF;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,eAAe,oEAAoE;AACnF;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;AC9LA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,kEAAkE;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,4CAA4C,qBAAqB;AAC1F;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,YAAY;AACZ,IAAI;AACJ;AACA;AACA;AACA;AACA,2CAA2C,kEAAkE;AAC7G;AACA,0BAA0B,yDAAyD;AACnF;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,cAAc;AACvC;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,IAAI;AACJ,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 37);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5e9fbe1b2aed8d77534c","module.exports = require(\"moduler\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moduler\"\n// module id = 0\n// module chunks = 0","\"use strict\"\n\nmodule.exports = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/mithril/test-utils/callAsync.js\n// module id = 1\n// module chunks = 0","\"use strict\"\n\nmodule.exports = function parseURL(url, root) {\n\tvar data = {}\n\tvar protocolIndex = url.indexOf(\"://\")\n\tvar pathnameIndex = protocolIndex > -1 ? url.indexOf(\"/\", protocolIndex + 3) : url.indexOf(\"/\")\n\tvar searchIndex = url.indexOf(\"?\")\n\tvar hashIndex = url.indexOf(\"#\")\n\tif ((pathnameIndex > searchIndex && searchIndex > -1) || (pathnameIndex > hashIndex && hashIndex > -1)) pathnameIndex = -1\n\tif (searchIndex > hashIndex && hashIndex > -1) searchIndex = -1\n\tvar pathnameEnd = searchIndex > -1 ? searchIndex : hashIndex > -1 ? hashIndex : url.length\n\tif (protocolIndex > -1) {\n\t\t//it's a full URL\n\t\tif (pathnameIndex < 0) pathnameIndex = url.length\n\t\tvar portIndex = url.indexOf(\":\", protocolIndex + 1)\n\t\tif (portIndex < 0) portIndex = pathnameIndex\n\t\tdata.protocol = url.slice(0, protocolIndex + 1)\n\t\tdata.hostname = url.slice(protocolIndex + 3, portIndex)\n\t\tdata.port = url.slice(portIndex + 1, pathnameIndex)\n\t\tdata.pathname = url.slice(pathnameIndex, pathnameEnd) || \"/\"\n\t}\n\telse {\n\t\tdata.protocol = root.protocol\n\t\tdata.hostname = root.hostname\n\t\tdata.port = root.port\n\t\tif (pathnameIndex === 0) {\n\t\t\t//it's an absolute path\n\t\t\tdata.pathname = url.slice(pathnameIndex, pathnameEnd) || \"/\"\n\t\t}\n\t\telse if (searchIndex !== 0 && hashIndex !== 0) {\n\t\t\t//it's a relative path\n\t\t\tvar slashIndex = root.pathname.lastIndexOf(\"/\")\n\t\t\tvar path = slashIndex > -1 ? root.pathname.slice(0, slashIndex + 1) : \"./\"\n\t\t\tvar normalized = url.slice(0, pathnameEnd).replace(/^\\.$/, root.pathname.slice(slashIndex + 1)).replace(/^\\.\\//, \"\")\n\t\t\tvar dotdot = /\\/[^\\/]+?\\/\\.{2}/g\n\t\t\tvar pathname = path + normalized\n\t\t\tpathname = path + normalized\n\t\t\twhile (dotdot.test(pathname)) pathname = pathname.replace(dotdot, \"\")\n\t\t\tpathname = pathname.replace(/\\/\\.\\//g, \"/\").replace(/^(\\/\\.{2})+/, \"\") || \"/\"\n\t\t\tdata.pathname = pathname\n\t\t}\n\t}\n\tvar searchEnd = hashIndex > -1 ? hashIndex : url.length\n\tdata.search = searchIndex > -1 ? url.slice(searchIndex, searchEnd) : \"\"\n\tdata.hash = hashIndex > -1 ? url.slice(hashIndex) : \"\"\n\treturn data\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/mithril/test-utils/parseURL.js\n// module id = 2\n// module chunks = 0","import './users/module'\r\nimport './roles-permissions/module'\r\nimport './courses/module'\r\nimport './lessions/module'\n\n\n// WEBPACK FOOTER //\n// ./src/modules/index.js","import $ from 'moduler'\r\n\r\nimport Topbar from './topbar.component'\r\nimport CourseItem from './course-item.component'\r\nimport Content from './content.component'\r\nimport CoursesIndex from './courses.template'\r\nimport CourseEdit from './course-edit.template'\r\n\r\n$.module('templates', function($){\r\n  $.component({Topbar})\r\n  $.component({Content})\r\n  $.component({CourseItem})\r\n  $.component({CoursesIndex})\r\n  $.component({CourseEdit})\r\n  $.route({'/courses': CoursesIndex})\r\n  $.route({'/course/new': CourseEdit})\r\n  $.route({'/course/:slug': CourseEdit})\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/templates/module.js","\"use strict\"\n\nvar pushStateMock = require(\"./pushStateMock\")\nvar domMock = require(\"./domMock\")\nvar xhrMock = require(\"./xhrMock\")\n\nmodule.exports = function(env) {\n\tenv = env || {}\n\tvar $window = env.window = {}\n\n\tvar dom = domMock()\n\tvar xhr = xhrMock()\n\tfor (var key in dom) if (!$window[key]) $window[key] = dom[key]\n\tfor (var key in xhr) if (!$window[key]) $window[key] = xhr[key]\n\tpushStateMock(env)\n\n\treturn $window\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/mithril/test-utils/browserMock.js\n// module id = 5\n// module chunks = 0","module.exports = require(\"diet\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"diet\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"diet-cross-origin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"diet-cross-origin\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"diet-static\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"diet-static\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"mithril\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mithril\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"mithril-node-render\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mithril-node-render\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"ramda\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ramda\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"sequelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sequelize\"\n// module id = 13\n// module chunks = 0","export default function CourseCtrl({\r\n  models: { Course }\r\n}){\r\n  // let { Course } = $.models\r\n  this.relations.Course\r\n  return {\r\n    index : function(){\r\n      return Course.findAll({\r\n        include : [Course.Author]\r\n      })\r\n    },\r\n    edit : function($){\r\n      return Course.findOne({\r\n        where : {\r\n          slug : $.params.slug\r\n        },\n        include : [Course.Author]\n      })\r\n    },\r\n    new : function($){\r\n      return new Promise((resolve, reject) => resolve(new Course))\r\n    },\r\n    create : function($){\r\n      var course = Course.build($.query)\r\n      return course.save()\r\n    },\r\n    install : function($){\r\n      Course.sync({force: true})\r\n      $.data.msg = {installed: 'courses table'}\r\n      $.json()\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/courses/course.controller.js","// export default @model Course {\r\n//   @uuid({\r\n//     primaryKey : true\r\n//   }) id\r\n//   @str title\r\n//   @str slug\r\n//   @text description\r\n//   @str video\r\n//   @str image\r\n//   @enum({\r\n//     values: [ 'default', 'yellow', 'orange', 'red', 'violet', 'green', 'cyan', 'blue' ],\r\n//     defaultValue: 'default'\r\n//   }) color\r\n//   @enum({\r\n//     values : [ 'Beginner', 'Intermediate', 'Advanced' ],\r\n//     defaultValue: 'Beginner'\r\n//   }) level\r\n//   @bool({\r\n//     defaultValue : false\r\n//   }) active\r\n// }\r\n\r\nexport default function({Q, db}){\r\n  return db.define('course', {\r\n    id : {\r\n      type: Q.UUID,\r\n      primaryKey: true,\r\n      defaultValue : Q.UUIDV1\r\n    },\r\n    title : {\r\n      type: Q.STRING\r\n    },\r\n    slug : {\r\n      type: Q.STRING\r\n    },\r\n    description : {\r\n      type: Q.TEXT\r\n    },\r\n    video : {\r\n      type: Q.STRING\r\n    },\r\n    image : {\r\n      type: Q.STRING\r\n    },\n    color : {\r\n      type: Q.ENUM,\r\n      values: [ 'default', 'yellow', 'orange', 'red', 'violet', 'green', 'cyan', 'blue' ],\r\n      defaultValue: 'default'\r\n    },\r\n    level : {\r\n      type: Q.ENUM,\r\n      values : [ 'Beginner', 'Intermediate', 'Advanced' ],\r\n      defaultValue: 'Beginner'\r\n    },\r\n    active : {\r\n      type : Q.BOOLEAN,\r\n      defaultValue : false\r\n    }\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/courses/course.model.js","export default function({models: { User, Course, Lession }}){\r\n  Course.Author = Course.belongsTo(User, {as: 'author'})\t\t// owner (lecturer)\r\n\t// Course.Student = Course.belongsToMany(User, { through: User })\t// students\r\n  Course.Lession = Course.hasMany(Lession)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/courses/course.relations.js","import $ from 'moduler'\r\n\r\nimport Course from './course.model'\r\nimport CourseRelations from './course.relations'\r\nimport CourseCtrl from './course.controller'\r\n// import CourseRoutes from './course.routes'\r\n\r\n\r\n$.module('courses', function($){\r\n\t$.model({Course})\r\n\t$.relation({Course:CourseRelations})\r\n\t$.controller({CourseCtrl})\r\n\r\n\t// $.route({CourseRoutes}) \t\t// => this should be removed\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// instead, user code snipped below\r\n\r\n\t$.resolver('courses', function({\r\n\t\tapi,\r\n\t\tattach,\r\n\t\tserver,\r\n\t\tcontrollers :  { CourseCtrl }\r\n\t}){\r\n\r\n\t\tattach('/courses', CourseCtrl.index)\r\n\t\tattach('/course/:slug', CourseCtrl.edit)\r\n\r\n\t\tapi.get('/courses', CourseCtrl.index)\r\n\t  api.get('/course/:slug', CourseCtrl.edit)\r\n\t  api.get('/course/new', CourseCtrl.new)\r\n\r\n\t\tserver\r\n\t\t\t.get('/course/new', CourseCtrl.new)\r\n\t\t\t.get('/course/install', CourseCtrl.install)\r\n\r\n\t})\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/courses/module.js","export default function LessionCtrl({ models: { Lession }}){\r\n  this.relations.Lession\r\n  return {\r\n    index : function($){\r\n      Lession\r\n        .findAll()\r\n        .then(lession => {\r\n          $.data.message = 'Hello World!!!!'\r\n          $.data.lession = lession\r\n          $.data.body = $.body\r\n          $.json()\r\n      })\r\n    },\r\n    new : function($){\r\n      var lession = Lession.build($.query)\r\n      $.data.msg = $.query\r\n      lession.save()\r\n      $.json()\r\n    },\r\n    install : function($){\r\n      Lession.sync({force: true})\r\n      $.data.msg = {installed: 'lession table'}\r\n      $.json()\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/lessions/lession.controller.js","export default function({Q, db}){\r\n  return db.define('lession', {\r\n    id : {\r\n      type: Q.UUID,\r\n      primaryKey: true,\r\n      defaultValue : Q.UUIDV1\r\n    },\r\n    title : {\r\n      type: Q.STRING\r\n    },\r\n    slug : {\r\n      type: Q.STRING\r\n    },\r\n    description : {\r\n      type: Q.TEXT\r\n    },\r\n    video : {\r\n      type: Q.STRING\r\n    },\r\n    image : {\r\n      type: Q.STRING\r\n    },\r\n    grade : Q.INTEGER,\r\n    complete : {\r\n      type : Q.BOOLEAN\r\n    }\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/lessions/lession.model.js","export default function({models: { Lession, User, Course, LessionUser }}){\r\n\tLession.belongsTo(Course)\r\n  // Lession.belongsToMany(User)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/lessions/lession.relations.js","import $ from 'moduler'\r\n\r\nimport Lession from './lession.model'\r\nimport LessionRelations from './lession.relations'\r\nimport LessionCtrl from './lession.controller'\r\n// import LessionRoutes from './lession.routes'\r\n\r\n$.module('lessions', function($){\r\n\t$.model({Lession})\r\n\t$.relation({Lession:LessionRelations})\r\n\t$.controller({LessionCtrl})\r\n\t// $.route({LessionRoutes})\r\n\t$.resolver({lessions: function({\r\n\t\tserver,\r\n\t\tcontrollers : { LessionCtrl }\r\n\t}){\r\n\t\t  server\r\n\t\t    .get('/lessions', LessionCtrl.index)\r\n\t\t    .get('/lession/new', LessionCtrl.new)\r\n\t\t    .get('/lession/install', LessionCtrl.install)\r\n\t\t}\r\n\t})\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/lessions/module.js","import $ from 'moduler'\r\n\r\nimport Role from './role.model'\r\nimport Permission from './permission.model'\r\nimport RolePermission from './roles-permissions.model'\r\nimport RoleCtrl from './role.controller'\r\nimport PermissionCtrl from './permission.controller'\r\n// import PermissionRoutes from './permission.routes'\r\n// import RoleRoutes from './role.routes'\r\n\r\n$.module('admin', function($){\r\n\t$.model({Role})\r\n\t$.model({Permission})\r\n\t$.model({RolePermission})\r\n\t$.relation('Role', require('./role.relations'))\r\n\t$.relation('Permission', require('./permission.relations'))\r\n\t$.controller({RoleCtrl})\r\n\t$.controller({PermissionCtrl})\r\n\t// $.route({RoleRoutes})\r\n\t// $.route({PermissionRoutes})\r\n\t$.resolver({'roles-and-permissions': function({\r\n\t\tserver,\r\n\t\tcontrollers: { PermissionCtrl, RoleCtrl }\r\n\t}){\r\n\t  server\r\n\t    .get('/permissions', PermissionCtrl.index)\r\n\t    .get('/permission/new', PermissionCtrl.new)\r\n\t    .get('/permission/install', PermissionCtrl.install)\r\n\r\n\t    .get('/roles', RoleCtrl.index)\r\n\t    .get('/role/new', RoleCtrl.new)\r\n\t    .get('/role/install', RoleCtrl.install)\r\n\t\t}\r\n\t})\r\n\t// console.log('ROUTES', $.routes.PermissionRoutes)\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/roles-permissions/module.js","import seed from './permission.seed'\r\nexport default function PermissionCtrl({\r\n    models: { Permission }  \r\n  }){\r\n  // relations.Permission\r\n  return {\r\n    index : function($){\r\n      Permission\r\n        .findAll()\r\n        .then(permissions => {\r\n          $.data.message = 'Hello World!!!!'\r\n          $.data.permissions = permissions\r\n          $.json()\r\n      })\r\n    },\r\n    new : function($){\r\n      $.data.msg = $.query\r\n      var permission = Permission.build($.query)\r\n      permission.save()\r\n      $.json()\r\n    },\r\n    install : function($){\r\n      Permission.sync({force: true}).then(()=>{\r\n        seed(Permission)\r\n        $.data.msg = {installed: 'permissions table'}\r\n        $.json()\r\n      })\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/roles-permissions/permission.controller.js","export default function({Q, db}){\r\n\treturn db.define('permission', {\r\n    id : {\r\n      type: Q.UUID,\r\n      primaryKey: true,\r\n      defaultValue: Q.UUIDV1\r\n    },\r\n    name : {\r\n      type: Q.STRING,\r\n      unique: true\r\n    },\r\n    description : {\r\n      type: Q.STRING\r\n    }\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/roles-permissions/permission.model.js","export default function({models: { Role, Permission, RolePermission }}){\r\n\tPermission.Role = Permission.belongsToMany(Role, { through: RolePermission })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/roles-permissions/permission.relations.js","export default function( Permission ){\r\n\tPermission.create({\r\n\t\tname : 'manageUsers',\r\n\t\tdescription : 'Manage Users'\r\n\t})\r\n\tPermission.create({\r\n\t\tname : 'manageCourses',\r\n\t\tdescription : 'Manage Courses'\r\n\t})\r\n\tPermission.create({\r\n\t\tname : 'listenCourses',\r\n\t\tdescription : 'Listen Courses'\r\n\t})\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/roles-permissions/permission.seed.js","import seed from './role.seed'\r\nexport default function RoleCtrl({\r\n    models: { Role },\r\n    relations : { RoleRel }\r\n  }){\r\n  return {\r\n    index : function($){\r\n      Role\r\n        .findAll()\r\n        .then(roles => {\r\n          $.data.message = 'Hello World!!!!'\r\n          $.data.roles = roles\r\n          $.json()\r\n      })\r\n    },\r\n    new : function($){\r\n      $.data.msg = $.query\r\n      let role = Role.build($.query)\r\n      role.save()\r\n      $.json()\r\n    },\r\n    install : function($){\r\n      Role.sync({force: true}).then(()=>{\r\n        seed(Role)\r\n        $.data.msg = {installed: 'roles table'}\r\n        $.json()\r\n      })\r\n\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/roles-permissions/role.controller.js","export default function({Q, db}){\r\n  return  db.define('role', {\r\n    id : {\r\n      type: Q.UUID,\r\n      primaryKey: true,\r\n      defaultValue: Q.UUIDV1,      \r\n    },\r\n    name : {\r\n      type: Q.STRING,\r\n      unique: true\r\n    },\r\n    description : {\r\n      type: Q.STRING\r\n    }\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/roles-permissions/role.model.js","export default function({models: { Role, User, Permission, RolePermission }}){\r\n\tRole.Permission = Role.belongsToMany(Permission, { through: RolePermission })\r\n\tRole.User = Role.hasMany(User)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/roles-permissions/role.relations.js","export default function( Role ){\r\n\t// Role.create({\r\n\t// \tname : 'admin',\r\n\t// \tdescription : 'Administrator'\r\n\t// })\r\n\t// Role.create({\r\n\t// \tname : 'lecturer',\r\n\t// \tdescription : 'Lecturer'\r\n\t// })\r\n\t// Role.create({\r\n\t// \tname : 'student',\r\n\t// \tdescription : 'Student'\r\n\t// })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/roles-permissions/role.seed.js","export default function({Q, db}){\r\n  return db.define('role-permission', {\r\n    id : {\r\n      type: Q.UUID,\r\n      primaryKey: true,\r\n      defaultValue: Q.UUIDV1\r\n    // },\r\n    // roleId : {\r\n    //   type: Q.UUID,\r\n    //   allowNull: false\r\n    // },\r\n    // permissionId : {\r\n    //   type: Q.UUID,\r\n    //   allowNull: false\r\n    }\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/roles-permissions/roles-permissions.model.js","import $ from 'moduler'\r\n\r\nimport User from './user.model'\r\nimport UserRelations from './user.relations'\r\nimport UserCtrl from './user.controller'\r\n// import UserRoutes from './user.routes'\r\n\r\n$.module('users', function($){\r\n\t$.model({User})\r\n\t$.relation({User:UserRelations})\r\n\t$.controller({UserCtrl})\r\n\t// $.route({UserRoutes})\r\n\r\n\t$.resolver({'users': function({\r\n\t    server,\r\n\t    controllers : { UserCtrl }\r\n\t  }){\r\n\t  server\r\n\t    .get('/users', UserCtrl.index)\r\n\t    .get('/user/new', UserCtrl.new)\r\n\t    .get('/user/install', UserCtrl.install)\r\n\t\t}\r\n\t})\r\n\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/users/module.js","import seed from './user.seed'\r\nexport default function UserCtrl($$){\r\n  this.relations.User\r\n  let User = this.models.User\r\n\r\n  return {\r\n    index : function($){\r\n      User\r\n        .findAll()\r\n        .then(users => {\r\n          $.data.message = 'Hello World!!!!'\r\n          $.data.users = users\r\n          $.data.body = $.body\r\n          $.json()\r\n        })\r\n\r\n    },\r\n    new : function($){\r\n      var user = User.build($.query)\r\n      $.data.msg = $.query\r\n      user.save()\r\n      $.json()\r\n    },\r\n    install : function($){\r\n      User.sync({force: true}).then(()=>{\r\n        $.data.msg = {installed: 'users table'}\r\n        seed($$)\r\n        $.json()\r\n      })\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/users/user.controller.js","export default function({Q, db}){\r\n  return db.define('user', {\r\n    id : {\r\n      type: Q.UUID,\r\n      primaryKey: true,\r\n      defaultValue: Q.UUIDV1\r\n    },\r\n    username : {\r\n      type: Q.STRING,\r\n      unique: true\r\n    },\r\n    email : {\r\n      type: Q.STRING,\r\n      unique: true\r\n    },\r\n    password : {\r\n      type: Q.STRING.BINARY\r\n    },\r\n    firstName : {\r\n      type: Q.STRING\r\n    },\r\n    lastName : {\r\n      type: Q.STRING\r\n    },\r\n    image : {\r\n      type: Q.STRING\r\n    },\r\n    description : {\r\n      type: Q.TEXT\r\n    },\r\n    state : {\r\n      type : Q.INTEGER,\r\n      defaultValue : 0\r\n    }\r\n  }, {\r\n    defaultScope: {\r\n      attributes: {\r\n        exclude: ['password']\r\n      }\r\n    }\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/users/user.model.js","export default function({\r\n  models: { User, Course, Role }\r\n}){\r\n  User.Courses = User.hasMany(Course, {\r\n    as: 'author'\r\n  })\r\n  User.Role = User.belongsTo(Role, {\r\n    as: \"role\"\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/users/user.relations.js","export default function( $ ){\r\n  let { User, Role, Course } = $.models;\n\r\n  $.chain(\r\n    ( ) => ( Role.build({\r\n  \t\tname : 'admin',\r\n  \t\tdescription : 'Administrator'\r\n  \t}).save() ),\r\n    (administrator) => {\n      var admin = new User\n      admin.setRole(administrator, {save: false})\n      admin.username = 'admin'\r\n      admin.email = 'admin@course.plus'\r\n      admin.firstName = 'Dane'\r\n      admin.lastName = 'Brdarski'\r\n      admin.password = 'qwertybanana'\r\n      admin.image = 'dane.jpg'\r\n      admin.description = 'All-seeing, All-knowing. The Admin.'\n      admin.save()\r\n  \t}\r\n  )()\n  $.chain(\r\n    () => ( Role.build({\r\n  \t\tname : 'student',\r\n  \t\tdescription : 'Student'\r\n  \t}).save() ),\n    (student) => {\n      let pepe = new User\n      pepe.setRole(student, {save: false})\r\n      pepe.username = 'student'\r\n      pepe.email = 'student@course.plus'\r\n      pepe.firstName = 'Pepe'\r\n      pepe.lastName = 'Biserov'\r\n      pepe.password = 'qwertybanana'\n      pepe.save()\r\n    }\n  )()\n  $.chain(\r\n    () => ( Role.build({\r\n      name : 'lecturer',\r\n      description : 'Lecturer'\r\n    }).save() ),\n    (lecturer) => {\n      let dane = new User\n      dane.setRole(lecturer, {save: false})\n      dane.username = 'dane'\r\n      dane.email = 'dane@course.plus'\r\n      dane.firstName = 'Dane'\r\n      dane.lastName = 'Brdarski'\r\n      dane.password = 'qwertybanana'\n      dane.image = 'dane.jpg'\n      dane.description = 'Dane is a front end developer at Schilling and the author of this awesome app. His expertese ranges from design, HTML, CSS, JavaScript, Angular and more recently some PHP.'\r\n      dane.save()\n\n      let alex = new User\r\n      alex.setRole(lecturer, {save: false})\r\n      alex.username = 'alex'\r\n      alex.email = 'alex@course.plus'\r\n      alex.firstName = 'Alex'\r\n      alex.lastName = 'Pffeipher'\r\n      alex.password = 'qwertybanana'\r\n      alex.image = 'alex.jpg'\r\n      alex.description = 'Alex is the Founder & CEO of Wayward Wild, a media incubator and content studio helping young websites, podcasts, web series, and publications stay true to their DNA.'\r\n      alex.save()\n        .then((alex)=>{\n          let laravel = new Course\n          laravel.setAuthor(alex, {save: false})\n          laravel.title = 'Laravel 101',\r\n          laravel.slug = 'laravel-101',\r\n          laravel.description = 'Dive into the Laravel essentials with this laravel by one of the core contributors.',\r\n          laravel.level = 'Beginner',\r\n          laravel.color = 'red',\r\n          laravel.image = 'laravel.png',\r\n          laravel.video = 'lnf1GdNxDbc'\r\n          laravel.save()\r\n          let lara401 = new Course\r\n          lara401.setAuthor(alex, {save: false})\r\n          lara401.title = 'Laravel 401'\r\n          lara401.slug = 'laravel-401'\r\n          lara401.description = 'Dive into the Laravel essentials with this course by one of the core contributors.'\r\n          lara401.level = 'Intermediate'\r\n          lara401.color = 'orange'\r\n          lara401.image = 'grunt.png'\r\n          lara401.save()\n        })\r\n\n      let kirby = new User\r\n      kirby.setRole(lecturer, {save: false})\r\n      kirby.username = 'kirby'\r\n      kirby.email = 'kirby@course.plus'\r\n      kirby.firstName = 'Kirby'\r\n      kirby.lastName = 'Jones'\r\n      kirby.password = 'qwertybanana'\r\n      kirby.image = 'kirby.jpg'\r\n      kirby.description = 'Kirby Jones is a San Francisco based fine artist whose projects have received international attention. The 1000 Journals Project, launched in 2000, has been exhibited at the San Francisco Museum of Modern Art and the Skirball Cultural Center in Los Angeles.'\r\n      kirby.save().then((kirby)=>{\r\n        let sass = new Course\r\n        sass.setAuthor(kirby, {save: false})\r\n        sass.title = 'SaSS is awesome!'\r\n        sass.slug = 'sass-is-awesome'\r\n        sass.description = 'Build responsive websites with one of the most advanced front end mobile frameworks.'\r\n        sass.level = 'Intermediate'\r\n        sass.color = 'violet'\r\n        sass.image = 'sass.png'\r\n        sass.save()\r\n        let zurb = new Course\r\n        zurb.setAuthor(kirby, {save: false})\r\n        zurb.title = 'ZURB Foudation Fundamentals'\r\n        zurb.slug = 'zurb-foudation-fundamentals'\r\n        zurb.description = 'Build responsive websites with one of the most advanced front end mobile frameworks.'\r\n        zurb.level = 'Beginner'\r\n        zurb.color = 'cyan'\r\n        zurb.image = 'zurb.png'\r\n        zurb.save()\r\n      })\r\n\n      let larry = new User\r\n      larry.setRole(lecturer, {save: false})\r\n      larry.username = 'larry'\r\n      larry.email = 'larry@course.plus'\r\n      larry.firstName = 'Kirby'\r\n      larry.lastName = 'Jones'\r\n      larry.password = 'qwertybanana'\r\n      larry.image = 'larry.jpg'\r\n      larry.description = 'Larry Smith is a veteran software developer and designer. Once upon a time, he was the co-founder and CEO of Virb (2007-2013), a DIY website builder for creatives which was acquired by GoDaddy in late 2013. Hes on twitter at @LarryTheSmith.'\r\n      larry.save().then(()=>{\r\n        let ng = new Course\r\n        ng.setAuthor(jack, {save: false})\r\n        ng.title = 'Angular Pet Shop'\r\n        ng.slug = 'angular-pet-shop'\r\n        ng.description = 'Build your first Angular app. Dive into the most popular application framework developed by Google.'\r\n        ng.level = 'Advanced'\r\n        ng.color = 'orange'\r\n        ng.image = 'angular.png'\r\n        ng.save()\r\n        let ng2 = new Course\r\n        ng2.setAuthor(jack, {save: false})\r\n        ng2.title = 'Advanced Angular Directives'\r\n        ng2.slug = 'advanced-angular-directives'\r\n        ng2.description = 'This course will teach you everything you need to know about directives in Angular.'\r\n        ng2.level = 'Advanced'\r\n        ng2.color = 'yellow'\r\n        ng2.image = 'angular.png'\r\n        ng2.save()\r\n      })\r\n\r\n      let jack = new User\r\n      jack.setRole(lecturer, {save: false})\r\n      jack.username = 'jack'\r\n      jack.email = 'jack@course.plus'\r\n      jack.firstName = 'Kirby'\r\n      jack.lastName = 'Jones'\r\n      jack.password = 'qwertybanana'\r\n      jack.image = 'jack.jpg'\r\n      jack.description = 'Larry Smith is a veteran software developer and designer. Once upon a time, he was the co-founder and CEO of Virb (2007-2013), a DIY website builder for creatives which was acquired by GoDaddy in late 2013. Hes on twitter at @LarryTheSmith.'\r\n      jack.save().then((jack)=>{\r\n        let laravel = new Course\r\n        laravel.setAuthor(jack, {save: false})\r\n        laravel.title='Laravel Database Essentials'\r\n        laravel.slug='laravel-database-essentials'\r\n        laravel.description='Learn how take advantage of Laravel\\'s built in model classes, schema builder and migration manager.'\r\n        laravel.level='Intermediate'\r\n        laravel.color='yellow'\r\n        laravel.image='database.png'\r\n        laravel.save()\r\n        let temps = new Course\r\n        temps.setAuthor(jack, {save: false})\r\n        temps.title = 'Laravel Templates'\r\n        temps.slug = 'laravel-templates'\r\n        temps.description = 'Laravel templating done right. Authored by the godfather of Laravel\\'s own Blade templating engine.'\r\n        temps.level = 'Intermediate'\r\n        temps.color = 'violet'\r\n        temps.image = 'laravel.png'\r\n        temps.save()\r\n      })\r\n    }\n  )()\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/users/user.seed.js","  // Create an app\r\n    const app = require('moduler')\r\n    const SQL = require('sequelize')\r\n    const diet = require('diet')\r\n    require('mithril/test-utils/browserMock')(global);\r\n    const m = require('mithril')\r\n    const render = require('mithril-node-render')\r\n    const crossOrigin = require('diet-cross-origin')\r\n    const dietStatic = require('diet-static')\r\n    const r = require('ramda')\r\n\r\n    var fs = require('fs')\r\n    // app.module('a', function(){})\r\n    // app.module({'b' : function(){}})\r\n\r\n    const baseTemplate = fs.readFileSync('./bin/index.html', 'utf8')\r\n\r\n    import './templates/module'\r\n    import './modules'\r\n\r\n    const server = diet()\r\n    server.header(crossOrigin({\r\n      defaults: {\r\n        origin: '*',\r\n        credentials: true\r\n      }\r\n    }))\r\n\r\n    const staticFiles = dietStatic({ path: server.path+'/../bin' })\r\n    // console.log('SERVER PATH', server.path)\r\n    server.listen('http://localhost:8000')\r\n    server.footer(staticFiles)\r\n\r\n    const db = new SQL('postgres', 'postgres', 'qwerty', {\r\n      host: 'localhost',\r\n      dialect: 'postgres',\r\n\r\n      pool: {\r\n        max: 5,\r\n        min: 0,\r\n        idle: 10000\r\n      }\r\n    })\r\n\r\n    db.authenticate()\r\n\r\n    app\r\n      .config('server', server)\r\n      .config('Q', SQL)\r\n      .config('db', db)\r\n      .config('_', r)\r\n\n    // app.module('setup', function($){\r\n\r\n    app.config('m', m)\r\n    app.config('baseTemplate', baseTemplate)\r\n\r\n    app.config('slugify', function(st){\r\n        st = st.toLowerCase()\r\n        st = st.replace(/[\\u00C0-\\u00C5]/ig,'a');\r\n        st = st.replace(/[\\u00C8-\\u00CB]/ig,'e');\r\n        st = st.replace(/[\\u00CC-\\u00CF]/ig,'i');\r\n        st = st.replace(/[\\u00D2-\\u00D6]/ig,'o');\r\n        st = st.replace(/[\\u00D9-\\u00DC]/ig,'u');\r\n        st = st.replace(/[\\u00D1]/ig,'n');\r\n        st = st.replace(/[\\-]/g,' ');\r\n        // st = st.replace(/[^a-z0-9 ]+/gi,'')\r\n        st = st.trim().replace(/ /g,'-');\r\n        st = st.replace(/[\\-]{2,}/g,'-');\r\n        st = st.replace(/^[^a-z]+/g,'');\r\n        return (st.replace(/[^a-z0-9\\- ]*/gi,''));\r\n    })\r\n\r\n    let components = app.store()\r\n    app.config('component', components.getOrSet)\r\n    app.config('components', components.getAll)\r\n\r\n    let models = app.store()\r\n    app.config('model', models.getOrSet)\r\n    app.config('models', models.getAll)\r\n    let relations = app.store()\r\n    app.config('relation', relations.getOrSet)\r\n    app.config('relations', relations.getAll)\r\n    let controllers = app.store()\r\n    app.config('controller', controllers.getOrSet)\r\n    app.config('controllers', controllers.getAll)\r\n    let resolver = app.store()\r\n\r\n    app.config('resolver', resolver.getOrSet)\r\n    app.config('resolve', resolver.getAll)\r\n\r\n    app.config('group', function(route, fn){\r\n      var instance = this\r\n      var newInstance = Object.create(this);\r\n      Object.defineProperty(newInstance, 'route', {\r\n        get : ()=> (instance.route || \"\") + route\r\n      })\r\n      fn.call(newInstance, newInstance)\r\n    })\r\n\r\n    const serializer = (options) => (data) => {\n      if (options.with) {\n        data = options.with.reduce( (obj, prop) => {\n          obj[prop] = data[prop]\n          return obj\n        }, {})\n      }\n      if (options.without) {\n        options.without.forEach( prop => {\n          if (data[prop]) {\n            delete data[prop]\n          }\n        })\n      }\n\t    return data\n    }\n\n    const publicUser = serializer({\n      without : [ 'password' ],\n      with: [\n        'id',\n        'username',\n        'firstName',\n        'lastName',\n        'description',\n      ]\n    })\n\n    const api = (options = {}) => {\n      let config = {\n        route: options.route\n      }\n      let dataHandler = ($, data) => {\n        $.data.data = data\n        $.json()\n      }\n      let json = controller => ($) => {\n        // fetchData  then  handleData\n        controller($).then( dataHandler.bind(null, $) )\n      }\n      api.method = (method) => (route, controller) => server[method](options.route + route, json(controller))\n      return {\n        get: api.method('get'),\n        post: api.method('post'),\n        put: api.method('put'),\n        delete: api.method('delete'),\n        patch: api.method('patch')\n      }\n    }\n\r\n    let routes = app.store()\r\n    // app.config('route', function(route, view){\r\n    //   routes.getOrSet(this.route || \"\" + route, view)\r\n    // })\r\n    app.config('route', routes.getOrSet)\r\n    app.config('routes', routes.getAll)\r\n\r\n    app.config('api', api({\r\n      route: '/api'\r\n    }))\r\n\r\n    app.config('view', (component, controller) => ($) => {\r\n      return controller($).then(\r\n        (data) => render(\r\n          m(component, {data})\r\n        )\r\n        .then((t) => {\r\n          $.header('content-type', 'text/html')\r\n          $.send(baseTemplate.replace('<!--body-->', t))\r\n          $.end()\r\n        })\r\n      )\r\n    })\r\n\r\n    app.config('json', controller => ($) => {\r\n      controller($).then(\r\n      (data) => {\r\n        $.data.data = data\r\n        $.json()\r\n      })\r\n    })\r\n\r\n    app.config('attach', (routeName, controller) => {\r\n      server.get(routeName, app.view(app.routes[routeName], controller))\r\n      server.post(routeName, app.json(controller))\r\n    })\r\n\r\n    app.config('chain', function(){\r\n\t    return (init) => Array.prototype.reduce.call(arguments, (acc, x) => acc && acc.then ? acc.then(x) : x(acc), init)\r\n    })\r\n\r\n    app.modules()\r\n    app.run(function({server, resolve}) {\r\n      resolve()\r\n      function model(target, prop, descriptor) {\r\n        console.log('@model')\r\n        console.log(target)\r\n        console.log(prop)\r\n        console.log(descriptor)\r\n      }\r\n      // function Enum(target, prop, descriptor){\r\n      //   target.prototype[prop] = 'enum'\r\n      //   return function()\r\n      // }\r\n      function decorator(fn){\r\n        return function(...params) {\r\n          let descriptor = params[params.length - 1]\r\n          if (\r\n              params.length === 3\r\n                && typeof descriptor === 'object'\r\n                && descriptor.hasOwnProperty('enumerable')\r\n                && descriptor.hasOwnProperty('initializer')\r\n                && descriptor.hasOwnProperty('configurable')\r\n             )\r\n          {\r\n            return fn([], ...params)\r\n          } else {\r\n            return fn.bind(null, params)\r\n          }\r\n        }\r\n      }\r\n      let Number = decorator(([options], target, prop, descriptor) => {\r\n        if(!options) {\r\n          descriptor.initializer = () => 'Number'\r\n        } else {\r\n          options.type = 'Number'\r\n          descriptor.initializer = () => options\r\n        }\r\n        return descriptor\r\n      })\r\n\r\n      let dataType = (type) => (options, target, property, descriptor) => {\r\n        if(!options) {\r\n          descriptor.initializer = () => type\r\n        } else {\r\n          // options.type = type\r\n          let o = {}\r\n          o[type] = options\r\n          descriptor.initializer = () => o\r\n        }\r\n        return descriptor\r\n      }\r\n\r\n      let dataDecorator = (type) => decorator(dataType(type))\r\n\r\n      let Enum = dataDecorator('ENUM')\r\n\r\n      let Uuid = dataDecorator('UUID')\r\n      let Str = dataDecorator('STRING')\r\n      let Text = dataDecorator('TEXT')\r\n      let Bool = dataDecorator(\"BOOLEAN\")\r\n      let Int = dataDecorator('INTEGER')\r\n      let bigInt = dataDecorator('BIGINT')\r\n      let Float = dataDecorator('FLOAT')\r\n      let Real = dataDecorator('REAL')\r\n      let Dbl = dataDecorator('DOUBLE')\r\n      let Dec = dataDecorator('DECIMAL')\r\n\r\n      let belongsTo = decorator(([options], target, prop, descriptor) => {\r\n        descriptor.initializer = () => i\r\n        let i = {}\r\n        let t = i.model = target.name // let t = $.model[target.name]\r\n        if(!options){\r\n          let r = i.target = prop // $.model[prop]\r\n          // t[prop] = t.belongsTo(r)\r\n          i.option = 'belongsTo'\r\n        } else {\r\n          let alias = options.useModel\r\n          if(alias){\r\n            options.as = prop\r\n            delete options.useModel\r\n          }\r\n          let r = i.target = alias || prop\r\n          // r = i.target = $.model[alias || prop]\r\n          options.relation = 'belongsTo'\r\n          i.options = options\r\n        }\r\n      })\r\n      function Model (target) {\r\n        return function() {\r\n          return {\r\n            gay: true\r\n          }\r\n        }\r\n      }\r\n\r\n      // @Model\r\n      class Course {\r\n        @Uuid({\r\n          primaryKey : true\r\n        }) id\r\n        @Str title\r\n        @Str slug\r\n        @Text description\r\n        @Str video\r\n        @Str image\r\n        @Enum({\r\n          values: [ 'default', 'yellow', 'orange', 'red', 'violet', 'green', 'cyan', 'blue' ],\r\n          defaultValue: 'default'\r\n        }) color\r\n        @Enum({\r\n          values : [ 'Beginner', 'Intermediate', 'Advanced' ],\r\n          defaultValue: 'Beginner'\r\n        }) level\r\n        @Bool({\r\n          defaultValue : false\r\n        }) active\r\n        @Float(11, 12)\n        TestFloat\r\n      }\r\n      // @Model\r\n      // class Course {\r\n      //   @Number\r\n      //   prop\r\n      //   @Number({\r\n      //     mothaFucka : true\r\n      //   })\r\n      //   prop2\r\n      //   @belongsTo\r\n      //   Degen\r\n      //   @belongsTo({useModel: 'user'})\r\n      //   Author\n      // }\r\n      server.get('/', ($) => {\r\n        $.data.message = 'Hello World!!!!'\r\n        $.data.context = this.constructor.name\r\n        $.data.r = Object.getOwnPropertyNames(routes)\r\n        $.data.app = app.constructor.name\r\n        render(m('div.asd.asd')).then((t) => {\r\n          $.data.template = t\r\n          $.data.class = new Course\r\n          $.json()\r\n        })\r\n      })\r\n    })\r\n\r\n      // .run(['models'], ($, models) => {\r\n      //   $.run()\r\n      // })\r\n\r\n      // .then(() => {\r\n      //   console.log('Connection has been established successfully.')\r\n      // })\r\n      // .catch(err => {\r\n      //   console.error('Unable to connect to the database:', err)\r\n      // })\r\n\r\n\r\n// force: true will drop the table if it already exists\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/server.js","export default function({m}){\r\n  return {\r\n    view: function(vnode) {\r\n      return m(\r\n        '.container', [\r\n          m(\r\n            'h1.punchline', vnode.attrs.title\r\n          ),\r\n          m('.row', vnode.children)\r\n        ]\r\n      )\r\n    }\r\n  }\r\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/templates/content.component.js","export default function({\r\n  _, m, slugify,\n  components : { Topbar, Content, CourseItem }\r\n}){\r\n  var xetter = (state) => (prop, xettings) => (value) => {\r\n    if(value != null){\r\n      state[prop] = value\r\n    }\r\n    return state[prop]\r\n  }\r\n  var model = _.once((data) => {\r\n    let x = xetter(data)\r\n    return {\r\n        title: x('title'),\r\n        slug: x('slug', {\r\n          // set: [ slugify ],\r\n          // get: [ ( state ) => state.slug || slugify( state.title() ) ]\r\n        }),\r\n        description: x('description'),\r\n        num: x('num')\r\n    }\r\n  })\r\n  var stateModel = _.once((data) => {\n    console.log(data)\n    let state = {\r\n      $: {\r\n        colors: ['Red', 'Orange', 'Blue'],\r\n        levels: ['Beginner', 'Intermediate', 'Advanced']\r\n      },\r\n      $$: {\r\n        title: function(v) {\r\n          state.title = v\r\n        },\r\n        slug: function(v) {\r\n          state.customSlug = slugify(v)\r\n        },\r\n        description: function(v) {\r\n          state.description = v\r\n        },\r\n        num: function(v) {\r\n          console.log([v])\r\n          state.num = v\r\n        }\r\n      },\r\n      title: data.title,\n      customSlug: data.slug,\r\n      description: data.description,\r\n      num: null\r\n    }\n    Object.defineProperty(state, 'slug', {\r\n      get: () => state.customSlug || slugify(state.title)\r\n    })\n    return state\r\n  })\n  return {\n    view: function(vnode) {\n      let item2 = stateModel(vnode.attrs.data);\r\n      let item = model(vnode.attrs.data);\r\n      return m('div', [\r\n        m(Topbar),\r\n        m(Content, {\r\n            title: \"Edit course\"\r\n          }, [\r\n          m('#main-panel.col-md-9', [\r\n            m('input[type=\"text\"].form-control.form-control-lg[id=\"title\"][name=\"title\"][aria-describedby=\"couseTitle\"][placeholder=\"Title\"]', {\r\n              value: item.title(),\r\n              oninput: m.withAttr(\"value\", item.title)\r\n            }),\r\n            m('small#couseTitle.form-text.text-muted', \"We'll never share your email with anyone else.\"),\r\n            m('input[type=\"text\"].form-control.form-control-sm', {\r\n              value: item.slug(),\r\n              onchange: m.withAttr(\"value\", item.slug)\r\n            }),\r\n            m('.form-section-meta', [\r\n              m('.form-group', [\r\n                m('label[for=\"description\"]', 'Description'),\r\n                m('textarea#description.form-control[name=\"description\"]', {\r\n                  value: item.description(),\n                  oninput: m.withAttr(\"value\", item.description)\n                }),\n              ]),\n              m('.row',[\r\n                m('.col-md-4',\r\n                  m('select.form-control', item2.$.levels.map((items)=>m('option', items)))\r\n                ),\r\n                m('.col-md-4',\r\n                  m('select.form-control', item2.$.colors.map((items)=>m('option', items)))\r\n                ),\r\n                m('.col-md-4',\n                  m('input[type=\"text\"].form-control', {\n                    value: item.num(),\n                    oninput: m.withAttr(\"value\", item.num)\n                  })\n                )\r\n              ])\r\n            ]),\r\n            m('a.btn.btn-primary.btn-lg[href=\"/courses\"]', {\r\n              oncreate: m.route.link\r\n            }, 'Click here!!!!')\r\n          ]),\r\n          m('#side-panel.col-md-3', [\r\n            m( '.buttons', [\r\n              m('.btn.btn-primary.btn-alt.btn-lg',  \"Save\"),\r\n              m('.btn.btn-primary.btn-lg',  \"Unpublish\")\r\n            ]),\r\n            m( CourseItem, vnode.attrs.data )\r\n          ])\r\n        ])\r\n      ])\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/templates/course-edit.template.js","import './course-item.less'\r\nexport default function({m}){\r\n  return {\r\n    view: function({attrs, children}) {\r\n      return m(\r\n        '.course', [m(\r\n          'a.thumb', {\r\n            bg: attrs.color,\r\n            href:'/course/' + attrs.slug,\r\n            oncreate: m.route.link\r\n          }, [\r\n            m(\".thumb-img\", {\r\n              bg : attrs.color,\r\n              style : {\r\n                backgroundImage : `url(/uploads/courses/${attrs.image})`\r\n              }\r\n            }),\r\n            m(\"h2.name\",\r\n              m(\"span\", attrs.title)\r\n            )\r\n          ]\r\n        ),\r\n        m(\r\n          '.inner', m(\r\n            'ul', [\r\n              m(\r\n                \"li.description\",\r\n                attrs.description\r\n              ),\r\n              m(\r\n                \"li.author\",\r\n                ['by ', m(\r\n                  'a', { href : attrs.author.id },`${attrs.author.firstName} ${attrs.author.lastName}`\r\n                )]\r\n              ),\r\n              m(\r\n                \"li.level\",\r\n                `Level: ${attrs.level}`\r\n              )\r\n          ])\r\n        )\r\n      ])\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/templates/course-item.component.js","export default function({\r\n  m, components : { Topbar, Content, CourseItem }\r\n}){\r\n  return {\n    view: function(vnode) {\r\n      console.log(vnode.attrs);\r\n      return m('div', [\r\n        m(Topbar),\r\n        m(\r\n          Content, {\r\n            title: \"Browse our courses...\"\r\n          },\r\n          vnode.attrs.data.map(\r\n            ( course ) => m(\r\n              '.col-sm-6.col-md-4.col-lg-3',\r\n              m( CourseItem, course )\r\n            )\r\n          )\r\n        )\r\n      ])\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/templates/courses.template.js","import './topbar.less'\r\nexport default function({m}){\r\n  return {\r\n    view: function() {\r\n      return m(\"header#header\",\r\n        m(\"div.container\",\r\n          m(\"div.row\", [\r\n            m(\"div.col-sm-3.logo\",\r\n              m(\"a#logo\", {href:\"/\"})\r\n            ),\r\n            m(\"div.col-sm-9.navigation\",\r\n              m(\"nav\", {role: \"navigation\"},\r\n                m(\"ul.menu\",\r\n                  m(\"li.nav-item\",\r\n                    m('a', {href : \"/signin\"}, 'Login')\r\n                  ),\r\n                  m(\"li.nav-item\",\n                    m('a', {href : \"/signup\"}, 'Sign up')\n                  )\r\n                )\r\n              )\r\n            )\r\n          ])\r\n        )\r\n      )\r\n    }\r\n  }\r\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/templates/topbar.component.js","\"use strict\"\n\nmodule.exports = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\n\tvar entries = string.split(\"&\"), data = {}, counters = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key = decodeURIComponent(entry[0])\n\t\tvar value = entry.length === 2 ? decodeURIComponent(entry[1]) : \"\"\n\n\t\tif (value === \"true\") value = true\n\t\telse if (value === \"false\") value = false\n\n\t\tvar levels = key.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data\n\t\tif (key.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j = 0; j < levels.length; j++) {\n\t\t\tvar level = levels[j], nextLevel = levels[j + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tvar isValue = j === levels.length - 1\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key = levels.slice(0, j).join()\n\t\t\t\tif (counters[key] == null) counters[key] = 0\n\t\t\t\tlevel = counters[key]++\n\t\t\t}\n\t\t\tif (cursor[level] == null) {\n\t\t\t\tcursor[level] = isValue ? value : isNumber ? [] : {}\n\t\t\t}\n\t\t\tcursor = cursor[level]\n\t\t}\n\t}\n\treturn data\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/mithril/querystring/parse.js\n// module id = 45\n// module chunks = 0","\"use strict\"\n\n/*\nKnown limitations:\n\n- `option.selected` can't be set/read when the option doesn't have a `select` parent\n- `element.attributes` is just a map of attribute names => Attr objects stubs\n- ...\n\n*/\n\n/*\noptions:\n- spy:(f: Function) => Function\n*/\n\nmodule.exports = function(options) {\n\toptions = options || {}\n\tvar spy = options.spy || function(f){return f}\n\tvar spymap = []\n\tfunction registerSpies(element, spies) {\n\t\tif(options.spy) {\n\t\t\tvar i = spymap.indexOf(element)\n\t\t\tif (i === -1) {\n\t\t\t\tspymap.push(element, spies)\n\t\t\t} else {\n\t\t\t\tvar existing = spymap[i + 1]\n\t\t\t\tfor (var k in spies) existing[k] = spies[k]\n\t\t\t}\n\t\t}\n\t}\n\tfunction getSpies(element) {\n\t\tif (element == null || typeof element !== \"object\") throw new Error(\"Element expected\")\n\t\tif(options.spy) return spymap[spymap.indexOf(element) + 1]\n\t}\n\n\tfunction isModernEvent(type) {\n\t\treturn type === \"transitionstart\" || type === \"transitionend\" || type === \"animationstart\" || type === \"animationend\"\n\t}\n\tfunction appendChild(child) {\n\t\tvar ancestor = this\n\t\twhile (ancestor !== child && ancestor !== null) ancestor = ancestor.parentNode\n\t\tif (ancestor === child) throw new Error(\"Node cannot be inserted at the specified point in the hierarchy\")\n\n\t\tif (child.nodeType == null) throw new Error(\"Argument is not a DOM element\")\n\n\t\tvar index = this.childNodes.indexOf(child)\n\t\tif (index > -1) this.childNodes.splice(index, 1)\n\t\tif (child.nodeType === 11) {\n\t\t\twhile (child.firstChild != null) this.appendChild(child.firstChild)\n\t\t\tchild.childNodes = []\n\t\t}\n\t\telse {\n\t\t\tthis.childNodes.push(child)\n\t\t\tif (child.parentNode != null && child.parentNode !== this) child.parentNode.removeChild(child)\n\t\t\tchild.parentNode = this\n\t\t}\n\t}\n\tfunction removeChild(child) {\n\t\tvar index = this.childNodes.indexOf(child)\n\t\tif (index > -1) {\n\t\t\tthis.childNodes.splice(index, 1)\n\t\t\tchild.parentNode = null\n\t\t}\n\t\telse throw new TypeError(\"Failed to execute 'removeChild'\")\n\t}\n\tfunction insertBefore(child, reference) {\n\t\tvar ancestor = this\n\t\twhile (ancestor !== child && ancestor !== null) ancestor = ancestor.parentNode\n\t\tif (ancestor === child) throw new Error(\"Node cannot be inserted at the specified point in the hierarchy\")\n\n\t\tif (child.nodeType == null) throw new Error(\"Argument is not a DOM element\")\n\n\t\tvar refIndex = this.childNodes.indexOf(reference)\n\t\tvar index = this.childNodes.indexOf(child)\n\t\tif (reference !== null && refIndex < 0) throw new TypeError(\"Invalid argument\")\n\t\tif (index > -1) this.childNodes.splice(index, 1)\n\t\tif (reference === null) this.appendChild(child)\n\t\telse {\n\t\t\tif (child.nodeType === 11) {\n\t\t\t\tthis.childNodes.splice.apply(this.childNodes, [refIndex, 0].concat(child.childNodes))\n\t\t\t\twhile (child.firstChild) {\n\t\t\t\t\tvar subchild = child.firstChild\n\t\t\t\t\tchild.removeChild(subchild)\n\t\t\t\t\tsubchild.parentNode = this\n\t\t\t\t}\n\t\t\t\tchild.childNodes = []\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.childNodes.splice(refIndex, 0, child)\n\t\t\t\tif (child.parentNode != null && child.parentNode !== this) child.parentNode.removeChild(child)\n\t\t\t\tchild.parentNode = this\n\t\t\t}\n\t\t}\n\t}\n\tfunction getAttribute(name) {\n\t\tif (this.attributes[name] == null) return null\n\t\treturn this.attributes[name].value\n\t}\n\tfunction setAttribute(name, value) {\n\t\t/*eslint-disable no-implicit-coercion*/\n\t\t// this is the correct kind of conversion, passing a Symbol throws in browsers too.\n\t\tvar nodeValue = \"\" + value\n\t\t/*eslint-enable no-implicit-coercion*/\n\n\t\tthis.attributes[name] = {\n\t\t\tnamespaceURI: null,\n\t\t\tget value() {return nodeValue},\n\t\t\tset value(value) {\n\t\t\t\t/*eslint-disable no-implicit-coercion*/\n\t\t\t\tnodeValue = \"\" + value\n\t\t\t\t/*eslint-enable no-implicit-coercion*/\n\t\t\t},\n\t\t\tget nodeValue() {return nodeValue},\n\t\t\tset nodeValue(value) {\n\t\t\t\tthis.value = value\n\t\t\t}\n\t\t}\n\t}\n\tfunction setAttributeNS(ns, name, value) {\n\t\tthis.setAttribute(name, value)\n\t\tthis.attributes[name].namespaceURI = ns\n\t}\n\tfunction removeAttribute(name) {\n\t\tdelete this.attributes[name]\n\t}\n\tfunction hasAttribute(name) {\n\t\treturn name in this.attributes\n\t}\n\tvar declListTokenizer = /;|\"(?:\\\\.|[^\"\\n])*\"|'(?:\\\\.|[^'\\n])*'/g\n\t/**\n\t * This will split a semicolon-separated CSS declaration list into an array of\n\t * individual declarations, ignoring semicolons in strings.\n\t *\n\t * Comments are also stripped.\n\t *\n\t * @param {string} declList\n\t * @return {string[]}\n\t */\n\tfunction splitDeclList(declList) {\n\t\tvar indices = [], res = [], match\n\n\t\t// remove comments, preserving comments in strings.\n\t\tdeclList = declList.replace(\n\t\t\t/(\"(?:\\\\.|[^\"\\n])*\"|'(?:\\\\.|[^'\\n])*')|\\/\\*[\\s\\S]*?\\*\\//g,\n\t\t\tfunction(m, str){\n\t\t\t\treturn str || \"\"\n\t\t\t}\n\t\t)\n\t\t/*eslint-disable no-cond-assign*/\n\t\twhile (match = declListTokenizer.exec(declList)) {\n\t\t\tif (match[0] === \";\") indices.push(match.index)\n\t\t}\n\t\t/*eslint-enable no-cond-assign*/\n\t\tfor (var i = indices.length; i--;){\n\t\t\tres.unshift(declList.slice(indices[i] + 1))\n\t\t\tdeclList = declList.slice(0, indices[i])\n\t\t}\n\t\tres.unshift(declList)\n\t\treturn res\n\t}\n\n\tvar activeElement\n\tvar $window = {\n\t\tdocument: {\n\t\t\tcreateElement: function(tag) {\n\t\t\t\tvar cssText = \"\"\n\t\t\t\tvar style = {}\n\t\t\t\tObject.defineProperty(style, \"cssText\", {\n\t\t\t\t\tget: function() {return cssText},\n\t\t\t\t\tset: function (value) {\n\t\t\t\t\t\tvar buf = []\n\t\t\t\t\t\tif (typeof value === \"string\") {\n\t\t\t\t\t\t\tfor (var key in style) style[key] = \"\"\n\t\t\t\t\t\t\tvar rules = splitDeclList(value)\n\t\t\t\t\t\t\tfor (var i = 0; i < rules.length; i++) {\n\t\t\t\t\t\t\t\tvar rule = rules[i]\n\t\t\t\t\t\t\t\tvar colonIndex = rule.indexOf(\":\")\n\t\t\t\t\t\t\t\tif (colonIndex > -1) {\n\t\t\t\t\t\t\t\t\tvar rawKey = rule.slice(0, colonIndex).trim()\n\t\t\t\t\t\t\t\t\tvar key = rawKey.replace(/-\\D/g, function(match) {return match[1].toUpperCase()})\n\t\t\t\t\t\t\t\t\tvar value = rule.slice(colonIndex + 1).trim()\n\t\t\t\t\t\t\t\t\tif (key !== \"cssText\") {\n\t\t\t\t\t\t\t\t\t\tstyle[key] = value\n\t\t\t\t\t\t\t\t\t\tbuf.push(rawKey + \": \" + value + \";\")\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcssText = buf.join(\" \")\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tvar events = {}\n\t\t\t\tvar element = {\n\t\t\t\t\tnodeType: 1,\n\t\t\t\t\tnodeName: tag.toUpperCase(),\n\t\t\t\t\tnamespaceURI: \"http://www.w3.org/1999/xhtml\",\n\t\t\t\t\tappendChild: appendChild,\n\t\t\t\t\tremoveChild: removeChild,\n\t\t\t\t\tinsertBefore: insertBefore,\n\t\t\t\t\thasAttribute: hasAttribute,\n\t\t\t\t\tgetAttribute: getAttribute,\n\t\t\t\t\tsetAttribute: setAttribute,\n\t\t\t\t\tsetAttributeNS: setAttributeNS,\n\t\t\t\t\tremoveAttribute: removeAttribute,\n\t\t\t\t\tparentNode: null,\n\t\t\t\t\tchildNodes: [],\n\t\t\t\t\tattributes: {},\n\t\t\t\t\tget firstChild() {\n\t\t\t\t\t\treturn this.childNodes[0] || null\n\t\t\t\t\t},\n\t\t\t\t\tget nextSibling() {\n\t\t\t\t\t\tif (this.parentNode == null) return null\n\t\t\t\t\t\tvar index = this.parentNode.childNodes.indexOf(this)\n\t\t\t\t\t\tif (index < 0) throw new TypeError(\"Parent's childNodes is out of sync\")\n\t\t\t\t\t\treturn this.parentNode.childNodes[index + 1] || null\n\t\t\t\t\t},\n\t\t\t\t\tset textContent(value) {\n\t\t\t\t\t\tthis.childNodes = []\n\t\t\t\t\t\tif (value !== \"\") this.appendChild($window.document.createTextNode(value))\n\t\t\t\t\t},\n\t\t\t\t\tset innerHTML(value) {\n\t\t\t\t\t\twhile (this.firstChild) this.removeChild(this.firstChild)\n\n\t\t\t\t\t\tvar stack = [this], depth = 0, voidElements = [\"area\", \"base\", \"br\", \"col\", \"command\", \"embed\", \"hr\", \"img\", \"input\", \"keygen\", \"link\", \"meta\", \"param\", \"source\", \"track\", \"wbr\"]\n\t\t\t\t\t\tvalue.replace(/<([a-z0-9\\-]+?)((?:\\s+?[^=]+?=(?:\"[^\"]*?\"|'[^']*?'|[^\\s>]*))*?)(\\s*\\/)?>|<\\/([a-z0-9\\-]+?)>|([^<]+)/g, function(match, startTag, attrs, selfClosed, endTag, text) {\n\t\t\t\t\t\t\tif (startTag) {\n\t\t\t\t\t\t\t\tvar element = $window.document.createElement(startTag)\n\t\t\t\t\t\t\t\tattrs.replace(/\\s+?([^=]+?)=(?:\"([^\"]*?)\"|'([^']*?)'|([^\\s>]*))/g, function(match, key, doubleQuoted, singleQuoted, unquoted) {\n\t\t\t\t\t\t\t\t\tvar keyParts = key.split(\":\")\n\t\t\t\t\t\t\t\t\tvar name = keyParts.pop()\n\t\t\t\t\t\t\t\t\tvar ns = keyParts[0]\n\t\t\t\t\t\t\t\t\tvar value = doubleQuoted || singleQuoted || unquoted || \"\"\n\t\t\t\t\t\t\t\t\tif (ns != null) element.setAttributeNS(ns, name, value)\n\t\t\t\t\t\t\t\t\telse element.setAttribute(name, value)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tstack[depth].appendChild(element)\n\t\t\t\t\t\t\t\tif (!selfClosed && voidElements.indexOf(startTag.toLowerCase()) < 0) stack[++depth] = element\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (endTag) {\n\t\t\t\t\t\t\t\tdepth--\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (text) {\n\t\t\t\t\t\t\t\tstack[depth].appendChild($window.document.createTextNode(text)) // FIXME handle html entities\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tget style() {\n\t\t\t\t\t\treturn style\n\t\t\t\t\t},\n\t\t\t\t\tset style(_){\n\t\t\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style#Setting_style\n\t\t\t\t\t\tthrow new Error(\"setting element.style is not portable\")\n\t\t\t\t\t},\n\t\t\t\t\tget className() {\n\t\t\t\t\t\treturn this.attributes[\"class\"] ? this.attributes[\"class\"].value : \"\"\n\t\t\t\t\t},\n\t\t\t\t\tset className(value) {\n\t\t\t\t\t\tif (this.namespaceURI === \"http://www.w3.org/2000/svg\") throw new Error(\"Cannot set property className of SVGElement\")\n\t\t\t\t\t\telse this.setAttribute(\"class\", value)\n\t\t\t\t\t},\n\t\t\t\t\tfocus: function() {activeElement = this},\n\t\t\t\t\taddEventListener: function(type, callback) {\n\t\t\t\t\t\tif (events[type] == null) events[type] = [callback]\n\t\t\t\t\t\telse events[type].push(callback)\n\t\t\t\t\t},\n\t\t\t\t\tremoveEventListener: function(type, callback) {\n\t\t\t\t\t\tif (events[type] != null) {\n\t\t\t\t\t\t\tvar index = events[type].indexOf(callback)\n\t\t\t\t\t\t\tif (index > -1) events[type].splice(index, 1)\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdispatchEvent: function(e) {\n\t\t\t\t\t\tif (this.nodeName === \"INPUT\" && this.attributes[\"type\"] != null && this.attributes[\"type\"].value === \"checkbox\" && e.type === \"click\") {\n\t\t\t\t\t\t\tthis.checked = !this.checked\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\te.target = this\n\t\t\t\t\t\tif (events[e.type] != null) {\n\t\t\t\t\t\t\tfor (var i = 0; i < events[e.type].length; i++) {\n\t\t\t\t\t\t\t\tevents[e.type][i].call(this, e)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.preventDefault = function() {\n\t\t\t\t\t\t\t// TODO: should this do something?\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof this[\"on\" + e.type] === \"function\" && !isModernEvent(e.type)) this[\"on\" + e.type](e)\n\t\t\t\t\t},\n\t\t\t\t\tonclick: null,\n\t\t\t\t}\n\n\t\t\t\tif (element.nodeName === \"A\") {\n\t\t\t\t\tObject.defineProperty(element, \"href\", {\n\t\t\t\t\t\tget: function() {return this.attributes[\"href\"] === undefined ? \"\" : \"[FIXME implement]\"},\n\t\t\t\t\t\tset: function(value) {this.setAttribute(\"href\", value)},\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tif (element.nodeName === \"INPUT\") {\n\t\t\t\t\tvar checked\n\t\t\t\t\tObject.defineProperty(element, \"checked\", {\n\t\t\t\t\t\tget: function() {return checked === undefined ? this.attributes[\"checked\"] !== undefined : checked},\n\t\t\t\t\t\tset: function(value) {checked = Boolean(value)},\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t})\n\n\t\t\t\t\tvar value = \"\"\n\t\t\t\t\tvar valueSetter = spy(function(v) {\n\t\t\t\t\t\t/*eslint-disable no-implicit-coercion*/\n\t\t\t\t\t\tvalue = v === null ? \"\" : \"\" + v\n\t\t\t\t\t\t/*eslint-enable no-implicit-coercion*/\n\t\t\t\t\t})\n\t\t\t\t\tObject.defineProperty(element, \"value\", {\n\t\t\t\t\t\tget: function() {\n\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t},\n\t\t\t\t\t\tset: valueSetter,\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t})\n\n\t\t\t\t\t// we currently emulate the non-ie behavior, but emulating ie may be more useful (throw when an invalid type is set)\n\t\t\t\t\tvar typeSetter = spy(function(v) {\n\t\t\t\t\t\tthis.setAttribute(\"type\", v)\n\t\t\t\t\t})\n\t\t\t\t\tObject.defineProperty(element, \"type\", {\n\t\t\t\t\t\tget: function() {\n\t\t\t\t\t\t\tif (!this.hasAttribute(\"type\")) return \"text\"\n\t\t\t\t\t\t\tvar type = this.getAttribute(\"type\")\n\t\t\t\t\t\t\treturn (/^(?:radio|button|checkbox|color|date|datetime|datetime-local|email|file|hidden|month|number|password|range|research|search|submit|tel|text|url|week|image)$/)\n\t\t\t\t\t\t\t.test(type)\n\t\t\t\t\t\t\t? type\n\t\t\t\t\t\t\t: \"text\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tset: typeSetter,\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t})\n\t\t\t\t\tregisterSpies(element, {\n\t\t\t\t\t\tvalueSetter: valueSetter,\n\t\t\t\t\t\ttypeSetter: typeSetter\n\t\t\t\t\t})\n\t\t\t\t}\n\n\n\t\t\t\tif (element.nodeName === \"TEXTAREA\") {\n\t\t\t\t\tvar wasNeverSet = true\n\t\t\t\t\tvar value = \"\"\n\t\t\t\t\tvar valueSetter = spy(function(v) {\n\t\t\t\t\t\twasNeverSet = false\n\t\t\t\t\t\t/*eslint-disable no-implicit-coercion*/\n\t\t\t\t\t\tvalue = v === null ? \"\" : \"\" + v\n\t\t\t\t\t\t/*eslint-enable no-implicit-coercion*/\n\t\t\t\t\t})\n\t\t\t\t\tObject.defineProperty(element, \"value\", {\n\t\t\t\t\t\tget: function() {\n\t\t\t\t\t\t\treturn wasNeverSet && this.firstChild ? this.firstChild.nodeValue : value\n\t\t\t\t\t\t},\n\t\t\t\t\t\tset: valueSetter,\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t})\n\t\t\t\t\tregisterSpies(element, {\n\t\t\t\t\t\tvalueSetter: valueSetter\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\t/* eslint-disable radix */\n\n\t\t\t\tif (element.nodeName === \"CANVAS\") {\n\t\t\t\t\tObject.defineProperty(element, \"width\", {\n\t\t\t\t\t\tget: function() {return this.attributes[\"width\"] ? Math.floor(parseInt(this.attributes[\"width\"].value) || 0) : 300},\n\t\t\t\t\t\tset: function(value) {this.setAttribute(\"width\", Math.floor(Number(value) || 0).toString())},\n\t\t\t\t\t})\n\t\t\t\t\tObject.defineProperty(element, \"height\", {\n\t\t\t\t\t\tget: function() {return this.attributes[\"height\"] ? Math.floor(parseInt(this.attributes[\"height\"].value) || 0) : 300},\n\t\t\t\t\t\tset: function(value) {this.setAttribute(\"height\", Math.floor(Number(value) || 0).toString())},\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\t/* eslint-enable radix */\n\n\t\t\t\tfunction getOptions(element) {\n\t\t\t\t\tvar options = []\n\t\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\t\t\t\t\t\tif (element.childNodes[i].nodeName === \"OPTION\") options.push(element.childNodes[i])\n\t\t\t\t\t\telse if (element.childNodes[i].nodeName === \"OPTGROUP\") options = options.concat(getOptions(element.childNodes[i]))\n\t\t\t\t\t}\n\t\t\t\t\treturn options\n\t\t\t\t}\n\t\t\t\tfunction getOptionValue(element) {\n\t\t\t\t\treturn element.attributes[\"value\"] != null ?\n\t\t\t\t\t\telement.attributes[\"value\"].value :\n\t\t\t\t\t\telement.firstChild != null ? element.firstChild.nodeValue : \"\"\n\t\t\t\t}\n\t\t\t\tif (element.nodeName === \"SELECT\") {\n\t\t\t\t\t// var selectedValue\n\t\t\t\t\tvar selectedIndex = 0\n\t\t\t\t\tObject.defineProperty(element, \"selectedIndex\", {\n\t\t\t\t\t\tget: function() {return getOptions(this).length > 0 ? selectedIndex : -1},\n\t\t\t\t\t\tset: function(value) {\n\t\t\t\t\t\t\tvar options = getOptions(this)\n\t\t\t\t\t\t\tif (value >= 0 && value < options.length) {\n\t\t\t\t\t\t\t\t// selectedValue = getOptionValue(options[selectedIndex])\n\t\t\t\t\t\t\t\tselectedIndex = value\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// selectedValue = \"\"\n\t\t\t\t\t\t\t\tselectedIndex = -1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t})\n\t\t\t\t\tvar valueSetter = spy(function(value) {\n\t\t\t\t\t\tif (value === null) {\n\t\t\t\t\t\t\tselectedIndex = -1\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar options = getOptions(this)\n\t\t\t\t\t\t\t/*eslint-disable no-implicit-coercion*/\n\t\t\t\t\t\t\tvar stringValue = \"\" + value\n\t\t\t\t\t\t\t/*eslint-enable no-implicit-coercion*/\n\t\t\t\t\t\t\tfor (var i = 0; i < options.length; i++) {\n\t\t\t\t\t\t\t\tif (getOptionValue(options[i]) === stringValue) {\n\t\t\t\t\t\t\t\t\t// selectedValue = stringValue\n\t\t\t\t\t\t\t\t\tselectedIndex = i\n\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// selectedValue = stringValue\n\t\t\t\t\t\t\tselectedIndex = -1\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tObject.defineProperty(element, \"value\", {\n\t\t\t\t\t\tget: function() {\n\t\t\t\t\t\t\tif (this.selectedIndex > -1) return getOptionValue(getOptions(this)[this.selectedIndex])\n\t\t\t\t\t\t\treturn \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tset: valueSetter,\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t})\n\t\t\t\t\tregisterSpies(element, {\n\t\t\t\t\t\tvalueSetter: valueSetter\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (element.nodeName === \"OPTION\") {\n\t\t\t\t\tvar valueSetter = spy(function(value) {\n\t\t\t\t\t\t/*eslint-disable no-implicit-coercion*/\n\t\t\t\t\t\tthis.setAttribute(\"value\", value === null ? \"\" : \"\" + value)\n\t\t\t\t\t\t/*eslint-enable no-implicit-coercion*/\n\t\t\t\t\t})\n\t\t\t\t\tObject.defineProperty(element, \"value\", {\n\t\t\t\t\t\tget: function() {return getOptionValue(this)},\n\t\t\t\t\t\tset: valueSetter,\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t})\n\t\t\t\t\tregisterSpies(element, {\n\t\t\t\t\t\tvalueSetter: valueSetter\n\t\t\t\t\t})\n\n\t\t\t\t\tObject.defineProperty(element, \"selected\", {\n\t\t\t\t\t\t// TODO? handle `selected` without a parent (works in browsers)\n\t\t\t\t\t\tget: function() {\n\t\t\t\t\t\t\tvar options = getOptions(this.parentNode)\n\t\t\t\t\t\t\tvar index = options.indexOf(this)\n\t\t\t\t\t\t\treturn index === this.parentNode.selectedIndex\n\t\t\t\t\t\t},\n\t\t\t\t\t\tset: function(value) {\n\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\tvar options = getOptions(this.parentNode)\n\t\t\t\t\t\t\t\tvar index = options.indexOf(this)\n\t\t\t\t\t\t\t\tif (index > -1) this.parentNode.selectedIndex = index\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse this.parentNode.selectedIndex = 0\n\t\t\t\t\t\t},\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\treturn element\n\t\t\t},\n\t\t\tcreateElementNS: function(ns, tag, is) {\n\t\t\t\tvar element = this.createElement(tag, is)\n\t\t\t\telement.nodeName = tag\n\t\t\t\telement.namespaceURI = ns\n\t\t\t\treturn element\n\t\t\t},\n\t\t\tcreateTextNode: function(text) {\n\t\t\t\t/*eslint-disable no-implicit-coercion*/\n\t\t\t\tvar nodeValue = \"\" + text\n\t\t\t\t/*eslint-enable no-implicit-coercion*/\n\t\t\t\treturn {\n\t\t\t\t\tnodeType: 3,\n\t\t\t\t\tnodeName: \"#text\",\n\t\t\t\t\tparentNode: null,\n\t\t\t\t\tget nodeValue() {return nodeValue},\n\t\t\t\t\tset nodeValue(value) {\n\t\t\t\t\t\t/*eslint-disable no-implicit-coercion*/\n\t\t\t\t\t\tnodeValue = \"\" + value\n\t\t\t\t\t\t/*eslint-enable no-implicit-coercion*/\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreateDocumentFragment: function() {\n\t\t\t\treturn {\n\t\t\t\t\tnodeType: 11,\n\t\t\t\t\tnodeName: \"#document-fragment\",\n\t\t\t\t\tappendChild: appendChild,\n\t\t\t\t\tinsertBefore: insertBefore,\n\t\t\t\t\tremoveChild: removeChild,\n\t\t\t\t\tparentNode: null,\n\t\t\t\t\tchildNodes: [],\n\t\t\t\t\tget firstChild() {\n\t\t\t\t\t\treturn this.childNodes[0] || null\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreateEvent: function() {\n\t\t\t\treturn {\n\t\t\t\t\tinitEvent: function(type) {this.type = type},\n\t\t\t\t}\n\t\t\t},\n\t\t\tget activeElement() {return activeElement},\n\t\t},\n\t}\n\t$window.document.documentElement = $window.document.createElement(\"html\")\n\t$window.document.documentElement.appendChild($window.document.createElement(\"head\"))\n\t$window.document.body = $window.document.createElement(\"body\")\n\t$window.document.documentElement.appendChild($window.document.body)\n\tactiveElement = $window.document.body\n\n\tif (options.spy) $window.__getSpies = getSpies\n\n\treturn $window\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/mithril/test-utils/domMock.js\n// module id = 46\n// module chunks = 0","\"use strict\"\n\nvar parseURL = require(\"../test-utils/parseURL\")\nvar callAsync = require(\"../test-utils/callAsync\")\n\nfunction debouncedAsync(f) {\n\tvar ref\n\treturn function() {\n\t\tif (ref != null) return\n\t\tref = callAsync(function(){\n\t\t\tref = null\n\t\t\tf()\n\t\t})\n\t}\n}\n\nmodule.exports = function(options) {\n\tif (options == null) options = {}\n\n\tvar $window = options.window || {}\n\tvar protocol = options.protocol || \"http:\"\n\tvar hostname = options.hostname || \"localhost\"\n\tvar port = \"\"\n\tvar pathname = \"/\"\n\tvar search = \"\"\n\tvar hash = \"\"\n\n\tvar past = [{url: getURL(), isNew: true, state: null, title: null}], future = []\n\n\tfunction getURL() {\n\t\tif (protocol === \"file:\") return protocol + \"//\" + pathname + search + hash\n\t\treturn protocol + \"//\" + hostname + prefix(\":\", port) + pathname + search + hash\n\t}\n\tfunction setURL(value) {\n\t\tvar data = parseURL(value, {protocol: protocol, hostname: hostname, port: port, pathname: pathname})\n\t\tvar isNew = false\n\t\tif (data.protocol != null && data.protocol !== protocol) protocol = data.protocol, isNew = true\n\t\tif (data.hostname != null && data.hostname !== hostname) hostname = data.hostname, isNew = true\n\t\tif (data.port != null && data.port !== port) port = data.port, isNew = true\n\t\tif (data.pathname != null && data.pathname !== pathname) pathname = data.pathname, isNew = true\n\t\tif (data.search != null && data.search !== search) search = data.search, isNew = true\n\t\tif (data.hash != null && data.hash !== hash) {\n\t\t\thash = data.hash\n\t\t\tif (!isNew) {\n\t\t\t\thashchange()\n\t\t\t}\n\t\t}\n\t\treturn isNew\n\t}\n\n\tfunction prefix(prefix, value) {\n\t\tif (value === \"\") return \"\"\n\t\treturn (value.charAt(0) !== prefix ? prefix : \"\") + value\n\t}\n\tfunction _hashchange() {\n\t\tif (typeof $window.onhashchange === \"function\") $window.onhashchange({type: \"hashchange\"})\n\t}\n\tvar hashchange = debouncedAsync(_hashchange)\n\tfunction popstate() {\n\t\tif (typeof $window.onpopstate === \"function\") $window.onpopstate({type: \"popstate\", state: $window.history.state})\n\t}\n\tfunction unload() {\n\t\tif (typeof $window.onunload === \"function\") $window.onunload({type: \"unload\"})\n\t}\n\n\t$window.location = {\n\t\tget protocol() {\n\t\t\treturn protocol\n\t\t},\n\t\tget hostname() {\n\t\t\treturn hostname\n\t\t},\n\t\tget port() {\n\t\t\treturn port\n\t\t},\n\t\tget pathname() {\n\t\t\treturn pathname\n\t\t},\n\t\tget search() {\n\t\t\treturn search\n\t\t},\n\t\tget hash() {\n\t\t\treturn hash\n\t\t},\n\t\tget origin() {\n\t\t\tif (protocol === \"file:\") return \"null\"\n\t\t\treturn protocol + \"//\" + hostname + prefix(\":\", port)\n\t\t},\n\t\tget host() {\n\t\t\tif (protocol === \"file:\") return \"\"\n\t\t\treturn hostname + prefix(\":\", port)\n\t\t},\n\t\tget href() {\n\t\t\treturn getURL()\n\t\t},\n\n\t\tset protocol(value) {\n\t\t\tthrow new Error(\"Protocol is read-only\")\n\t\t},\n\t\tset hostname(value) {\n\t\t\tunload()\n\t\t\tpast.push({url: getURL(), isNew: true})\n\t\t\tfuture = []\n\t\t\thostname = value\n\t\t},\n\t\tset port(value) {\n\t\t\tif (protocol === \"file:\") throw new Error(\"Port is read-only under `file://` protocol\")\n\t\t\tunload()\n\t\t\tpast.push({url: getURL(), isNew: true})\n\t\t\tfuture = []\n\t\t\tport = value\n\t\t},\n\t\tset pathname(value) {\n\t\t\tif (protocol === \"file:\") throw new Error(\"Pathname is read-only under `file://` protocol\")\n\t\t\tunload()\n\t\t\tpast.push({url: getURL(), isNew: true})\n\t\t\tfuture = []\n\t\t\tpathname = prefix(\"/\", value)\n\t\t},\n\t\tset search(value) {\n\t\t\tunload()\n\t\t\tpast.push({url: getURL(), isNew: true})\n\t\t\tfuture = []\n\t\t\tsearch = prefix(\"?\", value)\n\t\t},\n\t\tset hash(value) {\n\t\t\tvar oldHash = hash\n\t\t\tpast.push({url: getURL(), isNew: false})\n\t\t\tfuture = []\n\t\t\thash = prefix(\"#\", value)\n\t\t\tif (oldHash != hash) hashchange()\n\t\t},\n\n\t\tset origin(value) {\n\t\t\t//origin is writable but ignored\n\t\t},\n\t\tset host(value) {\n\t\t\t//host is writable but ignored in Chrome\n\t\t},\n\t\tset href(value) {\n\t\t\tvar url = getURL()\n\t\t\tvar isNew = setURL(value)\n\t\t\tif (isNew) {\n\t\t\t\tsetURL(url)\n\t\t\t\tunload()\n\t\t\t\tsetURL(value)\n\t\t\t}\n\t\t\tpast.push({url: url, isNew: isNew})\n\t\t\tfuture = []\n\t\t},\n\t}\n\t$window.history = {\n\t\tpushState: function(state, title, url) {\n\t\t\tpast.push({url: getURL(), isNew: false, state: state, title: title})\n\t\t\tfuture = []\n\t\t\tsetURL(url)\n\t\t},\n\t\treplaceState: function(state, title, url) {\n\t\t\tvar entry = past[past.length - 1]\n\t\t\tentry.state = state\n\t\t\tentry.title = title\n\t\t\tsetURL(url)\n\t\t},\n\t\tback: function() {\n\t\t\tif (past.length > 1) {\n\t\t\t\tvar entry = past.pop()\n\t\t\t\tif (entry.isNew) unload()\n\t\t\t\tfuture.push({url: getURL(), isNew: false, state: entry.state, title: entry.title})\n\t\t\t\tsetURL(entry.url)\n\t\t\t\tif (!entry.isNew) popstate()\n\t\t\t}\n\t\t},\n\t\tforward: function() {\n\t\t\tvar entry = future.pop()\n\t\t\tif (entry != null) {\n\t\t\t\tif (entry.isNew) unload()\n\t\t\t\tpast.push({url: getURL(), isNew: false, state: entry.state, title: entry.title})\n\t\t\t\tsetURL(entry.url)\n\t\t\t\tif (!entry.isNew) popstate()\n\t\t\t}\n\t\t},\n\t\tget state() {\n\t\t\treturn past.length === 0 ? null : past[past.length - 1].state\n\t\t},\n\t}\n\t$window.onpopstate = null,\n\t$window.onhashchange = null,\n\t$window.onunload = null\n\n\treturn $window\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/mithril/test-utils/pushStateMock.js\n// module id = 47\n// module chunks = 0","\"use strict\"\n\nvar callAsync = require(\"../test-utils/callAsync\")\nvar parseURL = require(\"../test-utils/parseURL\")\nvar parseQueryString = require(\"../querystring/parse\")\n\nmodule.exports = function() {\n\tvar routes = {}\n\t// var callback = \"callback\"\n\tvar serverErrorHandler = function(url) {\n\t\treturn {status: 500, responseText: \"server error, most likely the URL was not defined \" + url}\n\t}\n\n\tvar $window = {\n\t\tXMLHttpRequest: function XMLHttpRequest() {\n\t\t\tvar args = {}\n\t\t\tvar headers = {}\n\t\t\tvar aborted = false\n\t\t\tthis.setRequestHeader = function(header, value) {\n\t\t\t\theaders[header] = value\n\t\t\t}\n\t\t\tthis.getRequestHeader = function(header) {\n\t\t\t\treturn headers[header]\n\t\t\t}\n\t\t\tthis.open = function(method, url, async, user, password) {\n\t\t\t\tvar urlData = parseURL(url, {protocol: \"http:\", hostname: \"localhost\", port: \"\", pathname: \"/\"})\n\t\t\t\targs.method = method\n\t\t\t\targs.pathname = urlData.pathname\n\t\t\t\targs.search = urlData.search\n\t\t\t\targs.async = async != null ? async : true\n\t\t\t\targs.user = user\n\t\t\t\targs.password = password\n\t\t\t}\n\t\t\tthis.send = function(body) {\n\t\t\t\tvar self = this\n\t\t\t\tif(!aborted) {\n\t\t\t\t\tvar handler = routes[args.method + \" \" + args.pathname] || serverErrorHandler.bind(null, args.pathname)\n\t\t\t\t\tvar data = handler({url: args.pathname, query: args.search || {}, body: body || null})\n\t\t\t\t\tself.status = data.status\n\t\t\t\t\tself.responseText = data.responseText\n\t\t\t\t} else {\n\t\t\t\t\tself.status = 0\n\t\t\t\t}\n\t\t\t\tself.readyState = 4\n\t\t\t\tif (args.async === true) {\n\t\t\t\t\tcallAsync(function() {\n\t\t\t\t\t\tif (typeof self.onreadystatechange === \"function\") self.onreadystatechange()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.abort = function() {\n\t\t\t\taborted = true\n\t\t\t}\n\t\t},\n\t\tdocument: {\n\t\t\tcreateElement: function(tag) {\n\t\t\t\treturn {nodeName: tag.toUpperCase(), parentNode: null}\n\t\t\t},\n\t\t\tdocumentElement: {\n\t\t\t\tappendChild: function(element) {\n\t\t\t\t\telement.parentNode = this\n\t\t\t\t\tif (element.nodeName === \"SCRIPT\") {\n\t\t\t\t\t\tvar urlData = parseURL(element.src, {protocol: \"http:\", hostname: \"localhost\", port: \"\", pathname: \"/\"})\n\t\t\t\t\t\tvar handler = routes[\"GET \" + urlData.pathname] || serverErrorHandler.bind(null, element.src)\n\t\t\t\t\t\tvar data = handler({url: urlData.pathname, query: urlData.search, body: null})\n\t\t\t\t\t\tparseQueryString(urlData.search)\n\t\t\t\t\t\tcallAsync(function() {\n\t\t\t\t\t\t\tif (data.status === 200) {\n\t\t\t\t\t\t\t\tnew Function(\"$window\", \"with ($window) return \" + data.responseText).call($window, $window)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (typeof element.onerror === \"function\") {\n\t\t\t\t\t\t\t\telement.onerror({type: \"error\"})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tremoveChild: function(element) {\n\t\t\t\t\telement.parentNode = null\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t$defineRoutes: function(rules) {\n\t\t\troutes = rules\n\t\t},\n\t\t$defineJSONPCallbackKey: function(/* key */) {\n\t\t\t// callback = key\n\t\t},\n\t}\n\treturn $window\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/mithril/test-utils/xhrMock.js\n// module id = 48\n// module chunks = 0"],"sourceRoot":""}